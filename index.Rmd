---
title: "Reproducibility in Action!"
output: 
  html_document:
    toc: TRUE
---

<style>
/* Increase vertical space between TOC items */
.tocify-item.list-group-item {
  padding-top: 12px;
  padding-bottom: 20px;
  line-height: 1.6;
}

/* define colours used for action blocks & buttons */
  :root {
    --action-color: #FFDF64;
    --action-contrast: #877b66;
  }
</style>


# Learning Goals

- What is reproducibility and why should I care?

- 4 habits for reproducible research\
  *Bonus!:* some activities to refresh your R coding skills

- Git and GitHub make it easy to track changes & collaborate
\
\
\

# What is Reproducibility? 

Here we insert a slide deck explaining what is reproducibility
\
\
\

**Doing Research:**<p align="center">
![](./figures/research_dream_reality.png){width=50%}
</p>

That's okay! Having a **Data Management Plan** and good habits helps us get closer to the dream :)
\
\
\

## Doing reproducible research

> **Goal:** being able to re-create the *data and analysis* so that you and others can (ideally) arrive at the *same interpretations* of your results.

So, should we keep everything?

<p align="center">
![](https://med.stanford.edu/content/dam/sm-news/images/2009/10/sustain-freezer-101909.jpg){width=35%}
</p>


Nobody wants to deal with this!
\
\
\

# Habits for Reproducible Research

> **Goal:** being able to re-create the *data and analysis* so that you and others can (ideally) arrive at the *same interpretations* of your results.

~~Keep everything!~~

Keep *almost* everything in such a way that you, or people after you, can (happily?) go back to it.

4 reproducibility principles for achieving this are:

<ol> <!-- Force the numbering to be out of order -->
  <li value="1"> **Annotate:** explain what you're doing and why. </li>
  <li value="3"> **Automate:** make your decisions explicit by using code. </li>
  <li value="4"> **Share:** provide access to your work. </li>
  <li value="2"> **Hoard:** ... you will still have to keep *almost* everything ...</li>
</ol>
\
\
\
\
\
\

## 1. Annotate <img src="https://libapps-au.s3-ap-southeast-2.amazonaws.com/accounts/1771/images/annotate.png" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />


**Write explanations for your future collaborators**\
What? How? *Why?!*

**Habits:** use script headers, use meaningful & human-readable names, comment your code

**Tools:** notebook documents (e.g., R Notebook (.Rmd) files in RStudio)

<div style="background-color: var(--action-color); padding: 20px;">
### Time for Action: Annotate!
Here we insert a slide deck with the activity
</div>
\
\
\

## 2. Hoard <img src="https://lh3.googleusercontent.com/blogger_img_proxy/AEn0k_t3BbtzxyAYqbfzPrSXHDX3IeUrRhU1jPOjjOAkW9k0k8IoG8cmFmbm09_SFb0YM7BZrY6Ji_JDYu9zrZQh1PYXO43WmHGH8S04Ib6NHl5UvVru5mKRtas-k50qmohmAw=s0-d" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />


**Keep *almost* everything**

**Habits:** backup regularly (daily!), versions of software & packages, store raw data & intermediate steps in data processing, store code & progress on code

**Tools:** backup software (e.g., OneDrive is free for UniBE students),\
version control (e.g., git), online repositories (e.g., GitHub)



<div style="background-color: var(--action-color); padding: 20px;">
### Time for Action: Hoard!

The window below contains a function (`get.multiples1to10`) that multiplies the integers from 1 to 10 (`1:10`) by a constant value (`multiplier`), which is currently set to `3`. So it should print out ten multiples of 3, from 3 to 30.

**Run the code to convince yourself that it's working properly.**
</div>



<div>
<!-- This block embeds an interactive R console via RDrr  -->
  <br>
  <!-- Reload Button on top right -->
  <button id="reloadGoodCode"
        style="float: right; margin-left: 10px; font-size: 20px; padding: 10px 25px; border-radius: 7px; border: none; background-color: var(--action-contrast); color: var(--action-color);">
  Please reload the original code!
  </button>
  <!-- iframe (this is the R console) -->
  <iframe id="goodCode"
          src="https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier%20*%20numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)"
          width="100%" height="500" style="margin-top: 10px;" frameborder="0"></iframe>

  <!-- JavaScript -->
  <script>
    // this makes the reload button work
    document.getElementById("reloadGoodCode").addEventListener("click", function () {
      const iframe = document.getElementById("goodCode");
      iframe.src = iframe.src; // forces the iframe to reload
    });
  </script>
  <br>
</div>



<div style="background-color: var(--action-color); padding: 20px;">

The window below contains a buggy version of the same code.

**Find the bug and fix it so the code runs properly.**
</div>

<div>
<!-- This block embeds an interactive R console via RDrr  -->
  <br>
  <!-- Reload Button on top right -->
  <button id="reloadBuggyCode"
        style="float: right; margin-left: 10px; font-size: 20px; padding: 10px 25px; border-radius: 7px; border: none; background-color: var(--action-contrast); color: var(--action-color);">
  Please reload the original code!
  </button>

  <!-- iframe placeholder (this is the R console) -->
  <iframe id="buggyCode"
          width="100%" height="500" style="margin-top: 10px;" frameborder="0"></iframe>
  
  <!-- Sample new bug Button below everything -->
  <button id="sampleNewBug"
        style="font-size: 20px; padding: 10px 25px; border-radius: 7px; border: none; background-color: var(--action-contrast); color: var(--action-color);">
  I fixed it :D  Now give me a new bug to fix!
  </button>

  <!-- JavaScript -->
  <script>
    // reload the current buggy code
    document.getElementById("reloadBuggyCode").addEventListener("click", function () {
      const iframe = document.getElementById("buggyCode");
      iframe.src = iframe.src; // forces iframe to reload
    });
    
    // a list of URLs with buggy codes
    const buggyList = ["https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples110%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 1
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 2 
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%20c(1%2C10)%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 8
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 3
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 4
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20curr_val)%0Aprint(results)", // 5
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%205%3A-5%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 21
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20retrun(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 6
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10%20multiplier%20%3D%20current_value%0Aprint(results)", // 7
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier%2Fnumbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 9
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget!multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get!multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 10
                      "https://rdrr.io/snippets/embed/?code=simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0Adisplay%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 11
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%20.3%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 22
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value%0Aprint(results)", // 12
                      "https://rdrr.io/snippets/embed/?code=%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)%0A%0A%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D", // 13
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier%20%3C-%203)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 14
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Acurrent_value%20%3C%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 23
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function()%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)%0A", // 15
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier%2C%20)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 16
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Afunction%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20function)%0Aprint(results)", // 17
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier%2Bnumbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 24
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 18
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint%20results", // 19
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier-numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 20
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier-numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)"];
    
    // global variable indicating the index
    var theIndex;
    
    // a function to randomly sample an index
    function getRandomIndex() {
      // sample a random number between 0 and 24
      theIndex = (Math.floor(Math.random()*25));
    }
    
    // a function to successively increment index values for button click
    function incrementIndex() {
      // cycle through the numbers from 0 to length of buggyList
      theIndex = (theIndex + 1) % buggyList.length;
    }
    
    // a function to assign the buggy ULR to the src of the iframe
    function updateBuggyURL() {
      document.getElementById("buggyCode").src = buggyList[theIndex];
    }
    
    // Get a random index when the window loads and display its URL
    window.onload = function () {
        getRandomIndex();
        updateBuggyURL();
    };
    
    // click the button to sample a new bug
    document.getElementById("sampleNewBug").addEventListener("click", function () {
      const iframe = document.getElementById("buggyCode");
      incrementIndex();
      updateBuggyURL();
    });

  </script>
</div>
\
\
\

## 3. Automate <img src="https://images.lumacdn.com/cdn-cgi/image/format=auto,fit=cover,dpr=2,background=white,quality=75,width=400,height=400/event-covers/yo/f21e0c96-387b-4142-be2b-cb5da5fbc84f.png" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />


**Avoid manual manipulation**\
waste of time & error-prone\
decisions are <u>not</u> explicit and can be inconsistent

**Habits:** find+replace, use a scripting language for your analyses, automatically save parameters in the filename.

**Tools:** notebook documents

Here we insert a slide deck with the activity
\
\
\

## 4. Share <img src="https://assets.myket.ir/icons/large/com.appattitude.shareapp_f6f6c04e-10fb-4303-a952-0e783d3bfb38.png" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />


**Fundamentally, research is about sharing**\
with collaborators, with other scientists

**Habits:** think about your <u>audience</u> when analyzing (see annotate), share early and often

**Tools:** online repositories for data (e.g., Dryad), code (e.g., GitHub), and papers (e.g., EcoEvoRxiv)
\
\
\
\
\
\

## Reproducibility principles

  - **Annotate:** explain what you're doing and why.
  - **Automate:** make your decisions explicit by using code.
  - **Share:** provide access to your work.
  - **Hoard:** keep *almost* everything.

By implementing these reproducibility principles, your workspace can be more like this:

<p align="center">
![](https://assets.fishersci.com/TFS-Assets/CCG/product-images/F205638~p.eps-650.jpg){width=35%}
</p>

Here we insert a slide deck with the review.
\
\
\

# Intro to Git(Hub)

